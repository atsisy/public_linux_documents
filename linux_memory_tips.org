#+TITLE: Linuxにおけるメモリの話

* カーネル空間からユーザプロセス空間にアクセスできる理由

** IA-32かつ、Linux2.6.xの場合の話
   32bitアーキテクチャなので、認識できるメモリ空間は限界で4GB
   それを、カーネル空間1GB、ユーザプロセス空間3GBでどちらも仮想メモリ上にロードされている。
   この時、メモリマップは以下のような形式となる。
   | 空間                 | マップ範囲                | 説明          |
   | ユーザープロセス空間 | 0x0000_0000 ~ 0xB999_9999 | 下位メモリ3GB |
   | カーネル空間         | 0xC000_0000 ~ 0xFFFF_FFFF | 上位メモリ1GB |
   ユーザプロセス空間の領域は以上の通り0x0000_0000を先頭に3GB分しかアドレッシングできないが、
   カーネル空間は0xC0000_0000を先頭にして1GBとさらに後方のメモリ空間にもアドレッシングすることができる
   という認識で大丈夫。

